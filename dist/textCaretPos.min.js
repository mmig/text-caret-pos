!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(t):t.textCaretPos=e(t)}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this,function(t){var r,d=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],p=[{n:"direction",v:"inherit"},{n:"boxSizing",v:"inherit"},{n:"width",v:"auto"},{n:"height",v:"auto"},{n:"height",v:"auto"},{n:"borderTopWidth",v:"0px"},{n:"borderRightWidth",v:"0px"},{n:"borderBottomWidth",v:"0px"},{n:"borderLeftWidth",v:"0px"},{n:"borderStyle",v:"none"},{n:"paddingTop",v:"0px"},{n:"paddingRight",v:"0px"},{n:"paddingBottom",v:"0px"},{n:"paddingLeft",v:"0px"},{n:"marginTop",v:"0px"},{n:"maringRight",v:"0px"},{n:"maringBottom",v:"0px"},{n:"maringLeft",v:"0px"},{n:"fontStyle",v:"inherit"},{n:"fontVariant",v:"inherit"},{n:"fontWeight",v:"inherit"},{n:"fontStretch",v:"inherit"},{n:"fontSize",v:"inherit"},{n:"fontSizeAdjust",v:"inherit"},{n:"lineHeight",v:"inherit"},{n:"fontFamily",v:"inherit"},{n:"textAlign",v:"inherit"},{n:"textTransform",v:"inherit"},{n:"textIndent",v:"inherit"},{n:"textDecoration",v:"inherit"},{n:"letterSpacing",v:"inherit"},{n:"wordSpacing",v:"inherit"},{n:"tabSize",v:"inherit"}],l="undefined"!=typeof window,a=l&&null!=t.mozInnerScreenX,g=t.getComputedStyle?t.getComputedStyle:function(t){return t.currentStyle};function h(t){var e,n=t&&t.id||"input-textarea-caret-position-mirror-div";return(t&&t.debug||!1||t&&t.reuse||!1)&&(e=document.getElementById(n)),e||((e=document.createElement("div")).id=n,document.body.appendChild(e),r=void 0),e}function v(){var t=document.createElement("span"),e=t.style;e.position="absolute",e.visibility="hidden",e.fontSize="100px",document.body.appendChild(t);var n=parseFloat(g(t).getPropertyValue("font-size"));return null!==t.parentNode&&t.parentNode.removeChild(t),isFinite(n)?n/100:1}function f(t,e,p,h){var n=h&&h.debug||!1;if(n||h&&h.reuse||!1){var i,o=h&&h.forceUpdateStyle||!1;if(o||!h||h.reuse||(o=!0),(i=!o&&(h&&h.guessIfUpdateStyle||!1))&&("function"==typeof i&&!i(p)||r===t.tagName))return;r=t.tagName}else r=void 0;var f=p.style,s=g(t),u="INPUT"===t.nodeName;f.whiteSpace="pre-wrap",u?h&&h.allowInputWrap||(f.wordWrap="normal"):f.wordWrap="break-word",f.position="absolute",n||(f.visibility="hidden"),h&&!0===h.fontZoom&&(h.fontZoom=1/v()),(h&&h.additionalStyles?d.concat(h.additionalStyles):d).forEach(function(t){if(u&&"lineHeight"===t)if("border-box"===s.boxSizing){var e=parseInt(s.height),n=parseInt(s.paddingTop)+parseInt(s.paddingBottom)+parseInt(s.borderTopWidth)+parseInt(s.borderBottomWidth),i=n+parseInt(s.lineHeight);f.lineHeight=i<e?e-n+"px":e===i?s.lineHeight:0}else{var o=s;"normal"===s.lineHeight&&(f.lineHeight="1em",f.height=s.height,o=g(p));var r,d,a=0;isFinite(parseFloat(o.lineHeight))&&isFinite(r=parseFloat(s.height))?(["borderTop","borderBottom","paddingTop","paddingBottom","marginTop","marginBottom"].forEach(function(t){d=parseFloat(s[t]),isFinite(d)&&(a+=d)}),0===a?f.lineHeight=s.height:(d=Math.max(r-a,0),f.lineHeight=(0<d?d:r)+"px")):f[t]=o[t]}else if(!h||"number"!=typeof h.fontZoom||"fontSize"!==t&&"lineHeight"!==t)f[t]=s[t];else{var l;isFinite(l=parseFloat(s[t]))?f[t]=l*h.fontZoom+"px":f[t]=s[t]}}),a?t.scrollHeight>parseInt(s.height)&&(f.overflowY="scroll"):f.overflow="hidden"}function s(){r=void 0}function u(t,e){return e&&e.text?"function"==typeof e.text?e.text(t,e):e.text:t.value}function c(e,t,n,i){e.scrollLeft&&(n.scrollLeft=e.scrollLeft),e.scrollTop&&(n.scrollTop=e.scrollTop),e.dir&&(n.dir=e.dir),i&&i.additionalAttributes&&i.additionalAttributes.forEach(function(t){n[t]=e[t]});var o=g(e),r="INPUT"===e.nodeName;n.textContent=u(e,i).substring(0,t),!r||i&&i.allowInputWrap||(n.textContent=n.textContent.replace(/\s/g,"Â "));var d=document.createElement("span");if(d.textContent=u(e,i).substring(t)||".",i.fauxId&&(d.id=i.fauxId),i.forceClearFauxStyle){var a=d.style;p.forEach(function(t){a[t.n]=t.v})}n.appendChild(d);var l={top:d.offsetTop+parseInt(o.borderTopWidth),left:d.offsetLeft+parseInt(o.borderLeftWidth),height:parseInt(o.lineHeight)};return i&&i.returnHeight&&(l.height=d.offsetHeight),l}return{createDiv:h,measureFontZoom:v,styleDiv:f,resetStyleDiv:s,resetDiv:function(t){var e=t&&t.id||"input-textarea-caret-position-mirror-div",n=document.getElementById(e);n&&document.body.removeChild(n)},updateCoordinates:c,getCoordinates:function(t,e,n){if(!l)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var i=n&&n.debug||!1,o=i||n&&n.reuse||!1,r=h(n);f(t,0,r,n);var d=c(t,e,r,n);i&&(r.style.backgroundColor="#aaa",d._div=r);var a=n&&n.returnDiv;return o||a?a&&(d._div=r):(s(),document.body.removeChild(r)),d}}});
//# sourceMappingURL=textCaretPos.min.map